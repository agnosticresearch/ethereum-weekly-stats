<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polygon Weekly Top 20 Tokens - Week Ending September 3, 2024</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .chart-container { background-color: white; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 30px; padding: 20px; }
        h1, h2 { color: #8247E5; }
        h3 { font-size: 18px; margin-top: 0; color: #666; }
        .bar { fill: #8247E5; }
        .bar:hover { opacity: 0.8; }
        .bar-label { font-size: 12px; fill: black; }
        .value-label { font-size: 12px; fill: black; }
        .value-label.large-bar {fill: white;}
        .value-label.small-bar {fill: black;}
        .chart-icon { font-size: 12px; cursor: pointer; }
        a { color: inherit; text-decoration: none; }
    </style>
</head>
<body>
    <h1>Polygon Weekly Top 15 Tokens - Week Ending September 3, 2024</h1>
    <a href="index.html">Back to Index</a>

    <div class="chart-container">
        <h2>Top 15 Tokens by Growth Percentage</h2>
        <svg id="growthChart" width="760" height="600"></svg>
    </div>

    <div class="chart-container">
        <h2>Top 15 Tokens by Total Transactions</h2>
        <svg id="transactionsChart" width="760" height="600"></svg>
    </div>

    <script>
const growthData = [
    { name: "ZED Horse (ZED) (659f)", value: 525.44, address: "0x67f4732266c7300cca593c814d46bee72e40659f" },
    { name: "Super Useless Tok...f8bc", value: 388.88, address: "0x57211299bc356319ba5ca36873eb06896173f8bc" },
    { name: "agEUR (agEUR) (7db4)", value: 331.94, address: "0xe0b52e49357fd4daf2c15e02058dce6bc0057db4" },
    { name: "GenomeFi (GENO) (27db)", value: 126.87, address: "0xca730042595a1809793fbe2e9883c184c7eb27db" },
    { name: "PYR Token (PYR) (9682)", value: 224.03, address: "0x430ef9263e76dae63c84292c3409d61c598e9682" },
    { name: "SNPIT TOKEN(PoS) ...5d7d", value: 161.43, address: "0x22737f5bbb7c5b5ba407b0c1c9a9cdf66cf25d7d" },
    { name: "Storage Gastoken ...d2d0", value: 141.44, address: "0x1a9b54a3075119f1546c52ca0940551a6ce5d2d0" },
    { name: "PeakPok Coin (PPOK) (a459)", value: 128.43, address: "0x5202cfd2ec670e5e133cd272011f1e0e6fa8a459" },
    { name: "Rector (RTR) (e70a)", value: 174.57, address: "0x5dabdbc3dbda9bbedf5b6c1f839482e8c712e70a" },
    { name: "YL (YL) (006a)", value: 107.03, address: "0x44e19caf47a77b283975c26291f94b81d4f8006a" },
    { name: "Wrapped liquid st...bccd", value: 111.67, address: "0x03b54a6e9a984069379fae1a4fc4dbae93b3bccd" },
    { name: "TOWER (TOWER) (c47b)", value: 97.33, address: "0x2bc07124d8dac638e290f401046ad584546bc47b" },
    { name: "MORCHI (MORCHI) (fd13)", value: 91.62, address: "0xb48f53010acbc0e24d3d12d892e2215879e6fd13" },
    { name: "Tiny Score Ripple...e27a", value: 85.01, address: "0xdced51da2b8dfa1ad39b03f7e0c087a49e25e27a" },
    { name: "Objekt (OBJEKT) (a200)", value: 83.03, address: "0x0fb69f54ba90f17578a59823e09e5a1f8f3fa200" }
].sort((a, b) => b.value - a.value);

const transactionsData = [
    { name: "(PoS) Dai Stablec...a063", value: 1240688, address: "0x8f3cf7ad23cd3cadbd9735aff958023239c6a063" },
    { name: "Chip Q - tier-1 (...c078", value: 764347, address: "0xa736884e6906c215501cdac091c1783f5b7fc078" },
    { name: "Chip Q - tier-2 (...f299", value: 509604, address: "0x386db833c8db141db4b116120b5552c60d98f299" },
    { name: "Chip Q - tier-3 (...a252", value: 356942, address: "0xb8eeb56a491708b2f78fc7425feecd826896a252" },
    { name: "Longinus (LGNS) (0f01)", value: 218429, address: "0xeb51d9a39ad5eef215dc0bf39a8821ff804a0f01" },
    { name: "GreenMetaverseTok...d4c2", value: 181254, address: "0x714db550b574b3e927af3d93e26127d15721d4c2" },
    { name: "Chip Q - tier-4 (...ec4d", value: 177913, address: "0xe2d759095b7bd0082c0d9bc776c223e5b3d7ec4d" },
    { name: "Opex (OPX) (8bd8)", value: 178716, address: "0xa3fb72cbf2e07dc1b34aea569ed40755fd978bd8" },
    { name: "Chip Q - tier-5 (...e2a4", value: 113721, address: "0x6c72093c804cec9148b3fb08fe7ea23b4acee2a4" },
    { name: "Falcon (Falcon) (956f)", value: 64295, address: "0x45b0bf770edad9b3a8aaa015b47a1f46a7cf956f" },
    { name: "Dimo (DIMO) (61db)", value: 62078, address: "0xe261d618a959afffd53168cd07d12e37b26761db" },
    { name: "Kratos Cash (KCASH) (ae3c)", value: 58079, address: "0xcd3083917fd5763f20754dcd9c0cf4eb9245ae3c" },
    { name: "Mysterium (PoS) (...d9f3", value: 56095, address: "0x1379e8886a944d2d9d440b3d88df536aea08d9f3" },
    { name: "Chip Q - tier-6 (...532e", value: 70216, address: "0xae0379ddd83d55ccc35f362a67d5dd234ee2532e" },
    { name: "Aavegotchi GHST T...54a7", value: 48101, address: "0x385eeac5cb85a38a9a07a70c73e0a3271cfb54a7" }
].sort((a, b) => b.value - a.value);

function createChart(svgId, data, valuePrefix = "", isGrowthChart = false) {
    const svg = document.getElementById(svgId);
    const width = 760;
    const height = 600;
    const margin = { top: 20, right: 30, bottom: 40, left: 200 };
    const chartWidth = width - margin.left - margin.right;
    const chartHeight = height - margin.top - margin.bottom;

    // Clear existing content
    while (svg.firstChild) {
        svg.removeChild(svg.firstChild);
    }

    const maxValue = Math.max(...data.map(d => Math.abs(d.value)));
    const yScale = (i) => margin.top + (i * (chartHeight / data.length));
    const xScale = (val) => (Math.abs(val) / maxValue) * chartWidth;

    data.forEach((d, i) => {
        const barGroup = document.createElementNS("http://www.w3.org/2000/svg", "g");

        const barLink = document.createElementNS("http://www.w3.org/2000/svg", "a");
        barLink.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", `https://basescan.org/token/${d.address}`);
        barLink.setAttribute("target", "_blank");

        const barWidth = xScale(d.value);
        const bar = document.createElementNS("http://www.w3.org/2000/svg", "rect");
        bar.setAttribute("x", margin.left);
        bar.setAttribute("y", yScale(i));
        bar.setAttribute("width", barWidth);
        bar.setAttribute("height", chartHeight / data.length - 5);
        bar.setAttribute("class", "bar");
        barLink.appendChild(bar);
        barGroup.appendChild(barLink);

        // Token name (address label) - always to the left of the bar
        const label = document.createElementNS("http://www.w3.org/2000/svg", "text");
        label.setAttribute("x", margin.left - 10);
        label.setAttribute("y", yScale(i) + (chartHeight / data.length / 2));
        label.setAttribute("text-anchor", "end");
        label.setAttribute("alignment-baseline", "middle");
        label.setAttribute("class", "bar-label");
        label.setAttribute("fill", "black");
        label.textContent = d.name;
        barGroup.appendChild(label);

        // Numerical label
        const value = document.createElementNS("http://www.w3.org/2000/svg", "text");
        const valueText = valuePrefix + d.value.toLocaleString();
        value.setAttribute("y", yScale(i) + (chartHeight / data.length / 2));
        value.setAttribute("alignment-baseline", "middle");
        value.setAttribute("class", "value-label");

        // Position the numerical label based on bar size
        if (barWidth > 50) { // Adjust this threshold as needed
        // For large bars, place the label inside
        value.setAttribute("x", margin.left + barWidth - 5);
        value.setAttribute("text-anchor", "end");
        value.setAttribute("fill", "white");
        value.classList.add("large-bar");
        } else {
        // For smaller bars, place the label outside
        value.setAttribute("x", margin.left + barWidth + 5);
        value.setAttribute("text-anchor", "start");
        value.setAttribute("fill", "black");
        value.classList.add("small-bar");
        }
        value.textContent = valueText;
        barGroup.appendChild(value);

        const chartIcon = document.createElementNS("http://www.w3.org/2000/svg", "text");
        chartIcon.setAttribute("x", margin.left - 5);
        chartIcon.setAttribute("y", yScale(i) + (chartHeight / data.length / 2));
        chartIcon.setAttribute("text-anchor", "middle");
        chartIcon.setAttribute("alignment-baseline", "middle");
        chartIcon.setAttribute("class", "chart-icon");
        chartIcon.textContent = "ðŸ“Š";
        chartIcon.style.cursor = "pointer";
        chartIcon.addEventListener("click", (e) => {
            e.preventDefault();
            window.open(`https://dexscreener.com/base/${d.address}`, "_blank");
        });
        barGroup.appendChild(chartIcon);

        svg.appendChild(barGroup);
    });

    // X-axis
    const xAxis = document.createElementNS("http://www.w3.org/2000/svg", "line");
    xAxis.setAttribute("x1", margin.left);
    xAxis.setAttribute("y1", height - margin.bottom);
    xAxis.setAttribute("x2", width - margin.right);
    xAxis.setAttribute("y2", height - margin.bottom);
    xAxis.setAttribute("stroke", "black");
    svg.appendChild(xAxis);

    // Y-axis
    const yAxis = document.createElementNS("http://www.w3.org/2000/svg", "line");
    yAxis.setAttribute("x1", margin.left);
    yAxis.setAttribute("y1", margin.top);
    yAxis.setAttribute("x2", margin.left);
    yAxis.setAttribute("y2", height - margin.bottom);
    yAxis.setAttribute("stroke", "black");
    svg.appendChild(yAxis);
}

        createChart("growthChart", growthData, "+", true);
        createChart("transactionsChart", transactionsData, "", false);
    </script>
</body>
</html>